<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥ç‰¹è£½ï¼šå‘½é‹è³½é“æŒ‘æˆ°</title>
    <style>
        /* ç§‘æŠ€æ„Ÿç¶ è‰²ä¸»é¡Œè¨­è¨ˆ */
        :root {
            --primary-green: #00ff41;
            --dark-bg: #0a0a0a;
            --card-bg: #1a1a1a;
            --text-color: #e0e0e0;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        #game-container {
            width: 90%;
            max-width: 600px;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid var(--primary-green);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            text-align: center;
            position: relative;
        }

        /* ç§‘æŠ€æ„Ÿæ¨™é¡Œ */
        h1 {
            color: var(--primary-green);
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .options-container {
            display: grid;
            gap: 1rem;
        }

        button {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--primary-green);
            padding: 1rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.4);
            transform: translateY(-2px);
        }

        /* éš±è—å€å¡Š */
        .hidden { display: none; }

        /* çµå±€æ¨£å¼ */
        #result-screen h2 {
            color: var(--primary-green);
            font-size: 1.8rem;
        }

        .card-content {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
            border-left: 4px solid var(--primary-green);
            text-align: left;
            line-height: 1.8;
        }

        /* é€²åº¦æ¢ */
        .progress {
            font-size: 0.8rem;
            color: #666;
            margin-top: 1rem;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="game-content">
        </div>
</div>

<script>
    // éŠæˆ²ç‹€æ…‹å„²å­˜
    let currentStep = 'start';
    let track = ''; // é¸æ“‡çš„è³½é“
    let scores = { quiet: 0, active: 0, heal: 0, lively: 0 };

    const content = {
        start: {
            title: "SYSTEM START",
            text: "å¦‚æœä»Šå¤©æ²’æœ‰ä»»ä½•é™åˆ¶ï¼Œä½ æœƒé¸æ“‡å…ˆè¸ä¸Šçš„ä¸€æ¢è³½é“æ˜¯ï¼Ÿ",
            options: [
                { text: "ğŸƒ é‹å‹•è³½é“", next: 'sport_2', track: 'sport' },
                { text: "ğŸ§‹ é£²æ–™è³½é“", next: 'drink_2', track: 'drink' },
                { text: "ğŸ§ éŸ³æ¨‚è³½é“", next: 'music_2', track: 'music' }
            ]
        },
        // é‹å‹•è³½é“
        sport_2: {
            text: "é‹å‹•å°ä½ ä¾†èªªï¼Œæ›´åƒæ˜¯ï¼Ÿ",
            options: [
                { text: "ğŸŒŠ æ¸¸æ³³ï¼šæ²‰é€²è‡ªå·±çš„ä¸–ç•Œï¼Œç¯€å¥ç”±è‡ªå·±æŒæ§", next: 'sport_3', score: { quiet: 2 } },
                { text: "ğŸ¾ ç¶²çƒï¼šä¸€ä¾†ä¸€å¾€ï¼Œæœ‰å°æ‰‹æ‰åˆºæ¿€", next: 'sport_3', score: { active: 1, lively: 1 } },
                { text: "ğŸ€ ç±ƒçƒï¼šæ°£æ°›å¾ˆé‡è¦ï¼Œå’Œå¤§å®¶ä¸€èµ·ç‡ƒèµ·ä¾†", next: 'sport_3', score: { active: 2 } }
            ]
        },
        sport_3: {
            text: "å‡è¨­æ¯”åˆ†ä¸åˆ©ï¼Œä½ æœƒé¸æ“‡ï¼š",
            options: [
                { text: "å†·éœèª¿æ•´ç¯€å¥", next: 'ladder', score: { quiet: 1 } },
                { text: "æƒ³è¾¦æ³•æ‰“ä¸€å€‹æ¼‚äº®åæ“Š", next: 'ladder', score: { active: 1 } },
                { text: "é¼“å‹•æ°£æ°›ã€å¸¶å‹•å£«æ°£", next: 'ladder', score: { lively: 1 } }
            ]
        },
        // é£²æ–™è³½é“
        drink_2: {
            text: "ä½ ä»Šå¤©æƒ³å–é€™æ¯é£²æ–™çš„åŸå› æ˜¯ï¼Ÿ",
            options: [
                { text: "50åµ / å…«æ›œï¼šæˆ‘æƒ³è¦ç©©å®šã€å®‰å…¨ã€ä¸è¸©é›·", next: 'drink_3', score: { quiet: 1, heal: 1 } },
                { text: "ä¸€æ²æ—¥ / å¤§é™¢å­ï¼šæˆ‘æƒ³è¦ç™‚ç™’ã€è¢«ç…§é¡§çš„æ„Ÿè¦º", next: 'drink_3', score: { heal: 2 } },
                { text: "å†ç¡äº”åˆ†é˜ / ç‰¹å¥½å–ï¼šæˆ‘æƒ³è¦æœ‰è¶£ã€è¢«é©šå–œåˆ°", next: 'drink_3', score: { lively: 2 } }
            ]
        },
        drink_3: {
            text: "ä½ é€šå¸¸ä»€éº¼æ™‚å€™æœ€æƒ³å–é£²æ–™ï¼Ÿ",
            options: [
                { text: "å¿™åˆ°çˆ†ç‚¸çš„æ™‚å€™", next: 'ladder', score: { heal: 1 } },
                { text: "å¿ƒæƒ…æœ‰é»ä½è½çš„æ™‚å€™", next: 'ladder', score: { quiet: 1 } },
                { text: "æƒ³çŠ’è³è‡ªå·±çš„æ™‚å€™", next: 'ladder', score: { lively: 1 } }
            ]
        },
        // éŸ³æ¨‚è³½é“
        music_2: {
            text: "ä½ æœ€å¸¸åœ¨å“ªç¨®æ™‚å€™è½éŸ³æ¨‚ï¼Ÿ",
            options: [
                { text: "Decajoins / è½æ—¥é£›è»Šï¼šæ·±å¤œã€ç™¼å‘†", next: 'music_3', score: { quiet: 2 } },
                { text: "è‰æ± / ç¾ç§€é›†åœ˜ï¼šæƒ…ç·’å¾ˆæ»¿ã€éœ€è¦å®£æ´©", next: 'music_3', score: { active: 2 } },
                { text: "æ¤…å­æ¨‚åœ˜ / æ¥Šä¸–æš„ï¼šæ—¥å¸¸èƒŒæ™¯ã€é™ªä¼´æ„Ÿ", next: 'music_3', score: { heal: 2 } }
            ]
        },
        music_3: {
            text: "å¦‚æœåªèƒ½ç•™ä¸‹ä¸€é¦–æ­Œï¼Œä½ å¸Œæœ›å®ƒæ˜¯ï¼Ÿ",
            options: [
                { text: "æœƒè®“æˆ‘å†·éœä¸‹ä¾†çš„", next: 'ladder', score: { quiet: 1 } },
                { text: "æœƒè®“æˆ‘è¢«ç†è§£çš„", next: 'ladder', score: { heal: 1 } },
                { text: "æœƒè®“æˆ‘æƒ³ç¬‘çš„", next: 'ladder', score: { lively: 1 } }
            ]
        },
        // çˆ¬æ¢¯å­é—œå¡
        ladder: {
            title: "å‘½é‹æ¢¯å­ DESTINY LADDER",
            text: "ä½ ä¸€è·¯èµ°åˆ°é€™è£¡ï¼Œå…¶å¯¦æ¯ä¸€å€‹é¸æ“‡éƒ½åœ¨æ‚„æ‚„æ±ºå®šä½ æœƒèµ°å‘å“ªä¸€ç¨®çµå±€ã€‚<br><br>è«‹æŒ‰ä¸‹åŒæ­¥æŒ‰éˆ•ï¼Œç”Ÿæˆæœ€çµ‚ç”Ÿæ—¥å ±å‘Šã€‚",
            options: [
                { text: "âš¡ åŒæ­¥å‘½é‹æ•¸æ“š âš¡", next: 'result' }
            ]
        }
    };

    function renderStep(stepKey) {
        const stepData = content[stepKey];
        const container = document.getElementById('game-content');
        
        let html = `
            <h1>${stepData.title || 'LEVEL'}</h1>
            <p class="question-text">${stepData.text}</p>
            <div class="options-container">
        `;

        stepData.options.forEach(opt => {
            html += `<button onclick="handleChoice('${opt.next}', '${opt.track || ''}', ${JSON.stringify(opt.score || {})})">${opt.text}</button>`;
        });

        html += `</div>`;
        container.innerHTML = html;
    }

    window.handleChoice = function(nextStep, selectedTrack, score) {
        if(selectedTrack) track = selectedTrack;
        
        // ç´¯ç©åˆ†æ•¸
        for (let key in score) {
            scores[key] += score[key];
        }

        if(nextStep === 'result') {
            showResult();
        } else {
            renderStep(nextStep);
        }
    };

    function showResult() {
        const container = document.getElementById('game-content');
        let resultTitle = "";
        let resultContent = "";

        // ç°¡å–®é‚è¼¯åˆ¤å®šçµå±€
        if (scores.quiet >= 3) {
            resultTitle = "ğŸ‚ å®‰éœé™ªä¼´å‹ç”Ÿæ—¥";
            resultContent = "ç”Ÿæ—¥å¿«æ¨‚ï¼ä½ æ˜¯å€‹å…§å¿ƒç´°è†©çš„äººã€‚æˆ‘å€‘ç‚ºä½ æº–å‚™äº†ä¸€å€‹åªå±¬æ–¼ä½ çš„å®‰éœæ™‚åˆ»ï¼Œæ²’æœ‰å–§å›‚ï¼Œåªæœ‰æœ€æ‡‚ä½ çš„é™ªä¼´ã€‚";
        } else if (scores.lively >= 2 && scores.active >= 1) {
            resultTitle = "ğŸ‰ ç†±é¬§é©šå–œå‹ç”Ÿæ—¥";
            resultContent = "é©šå–œé è­¦ï¼ä½ ä»¥ç‚ºä»Šå¤©å¾ˆæ™®é€šå—ï¼Ÿå…¶å¯¦å¤§å®¶æ—©å°±ä½ˆå¥½å±€äº†ï¼Œæº–å‚™å¥½è¿æ¥é€™ä»½ç†±æƒ…äº†å—ï¼Ÿ";
        } else if (scores.heal >= 2) {
            resultTitle = "ğŸ§‹ è¢«ç…§é¡§å‹ç”Ÿæ—¥";
            resultContent = "è¦ªæ„›çš„ï¼Œä»Šå¤©ä½ ä¸éœ€è¦åŠªåŠ›ã€‚å› ç‚ºæœ‰äººæƒ³å¥½å¥½ç…§é¡§ä½ ï¼ŒæŠŠæ‰€æœ‰çš„ç”œåº¦éƒ½åŠ çµ¦ä½ ï¼";
        } else if (track === 'music') {
            resultTitle = "ğŸ§ æ‡‚ä½ çš„äººå‹ç”Ÿæ—¥";
            resultContent = "æœ‰äº›äººï¼Œä¹Ÿè¨±ä¸å¸¸è¯çµ¡ï¼Œä½†ä¸€ç›´è½è‘—ä½ åœ¨è½çš„æ­Œã€‚é€™å¼µå¡ç‰‡ä»£è¡¨æˆ‘å€‘ä¸€ç›´éƒ½åœ¨ã€‚";
        } else if (track === 'sport') {
            resultTitle = "ğŸƒ ä¸€èµ·å‰é€²å‹ç”Ÿæ—¥";
            resultContent = "äººç”Ÿå°±åƒè³½é“ï¼Œæ„Ÿè¬ä½ ä¸€ç›´é€™éº¼åŠªåŠ›ã€‚ä»Šå¹´æˆ‘å€‘ä¸åªæƒ³ç¥ä½ ç”Ÿæ—¥å¿«æ¨‚ï¼Œæ›´æƒ³é™ªä½ ä¸€èµ·è·‘ä¸‹å»ã€‚";
        } else {
            resultTitle = "ğŸ’Œ å°ˆå±¬ä½ å‹ç”Ÿæ—¥";
            resultContent = "é€™æ˜¯ä¸€å€‹éš±è—çµå±€ã€‚å› ç‚ºä½ çš„ç¨ç‰¹æ€§ï¼Œæˆ‘å€‘æº–å‚™äº†é€™ä»½æœ€å°ˆå±¬çš„ç¥ç¦ï¼Œåªæœ‰ä½ èƒ½é–‹å•Ÿã€‚";
        }

        container.innerHTML = `
            <h1>MISSION COMPLETE</h1>
            <div id="result-screen">
                <h2>${resultTitle}</h2>
                <div class="card-content">
                    ${resultContent}
                    <br><br>
                    <strong>Happy Birthday! ğŸˆ</strong>
                </div>
            </div>
            <button onclick="location.reload()" style="margin-top:2rem">é‡æ–°é–‹å§‹</button>
        `;
    }

    // åˆå§‹åŒ–ç¬¬ä¸€é—œ
    renderStep('start');

</script>

</body>
</html>